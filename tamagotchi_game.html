<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–º–∞–≥–æ—á–∏</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        
        .pet-display {
            font-size: 80px;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .pet-name {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .progress-fill {
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        
        .hunger-fill { background: #ff6b6b; }
        .energy-fill { background: #4ecdc4; }
        .mood-fill { background: #45b7d1; }
        .hygiene-fill { background: #96ceb4; }
        
        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        
        .action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .action-btn:active {
            transform: translateY(0);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .action-emoji {
            font-size: 24px;
        }
        
        .status-message {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            font-size: 14px;
            min-height: 20px;
        }
        
        .coins-display {
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .level-display {
            background: rgba(138, 43, 226, 0.2);
            border: 1px solid rgba(138, 43, 226, 0.3);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            font-size: 16px;
        }
        
        .sleep-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .sleep-message {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .sleep-emoji {
            font-size: 60px;
            margin-bottom: 20px;
        }
        
        .sleep-time {
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .wake-up-btn {
            background: #4ecdc4;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pet-display.happy {
            animation: pulse 1s infinite;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="pet-display" id="petDisplay">üê±</div>
        <div class="pet-name" id="petName">–ú–æ–π –ø–∏—Ç–æ–º–µ—Ü</div>
        
        <div class="level-display">
            <div>‚≠ê –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
            <div>üí´ –û–ø—ã—Ç: <span id="exp">0</span>/100</div>
            <div>üéÇ –í–æ–∑—Ä–∞—Å—Ç: <span id="age">0 –¥–Ω–µ–π</span></div>
        </div>
        
        <div class="coins-display">
            üí∞ –ú–æ–Ω–µ—Ç—ã: <span id="coins">100</span>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-label">üçï –ì–æ–ª–æ–¥</div>
                <div class="stat-value" id="hungerValue">50%</div>
                <div class="progress-bar">
                    <div class="progress-fill hunger-fill" id="hungerBar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat">
                <div class="stat-label">‚ö° –≠–Ω–µ—Ä–≥–∏—è</div>
                <div class="stat-value" id="energyValue">50%</div>
                <div class="progress-bar">
                    <div class="progress-fill energy-fill" id="energyBar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat">
                <div class="stat-label">üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</div>
                <div class="stat-value" id="moodValue">50%</div>
                <div class="progress-bar">
                    <div class="progress-fill mood-fill" id="moodBar" style="width: 50%"></div>
                </div>
            </div>
            <div class="stat">
                <div class="stat-label">üõÅ –ì–∏–≥–∏–µ–Ω–∞</div>
                <div class="stat-value" id="hygieneValue">50%</div>
                <div class="progress-bar">
                    <div class="progress-fill hygiene-fill" id="hygieneBar" style="width: 50%"></div>
                </div>
            </div>
        </div>
        
        <div class="status-message" id="statusMessage">–ü–∏—Ç–æ–º–µ—Ü —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è —Ö–æ—Ä–æ—à–æ!</div>
        
        <div class="actions">
            <button class="action-btn" id="feedBtn" onclick="feedPet()">
                <div class="action-emoji">üçï</div>
                <div>–ü–æ–∫–æ—Ä–º–∏—Ç—å</div>
            </button>
            <button class="action-btn" id="playBtn" onclick="playWithPet()">
                <div class="action-emoji">üéÆ</div>
                <div>–ò–≥—Ä–∞—Ç—å</div>
            </button>
            <button class="action-btn" id="cleanBtn" onclick="cleanPet()">
                <div class="action-emoji">üõÅ</div>
                <div>–ú—ã—Ç—å</div>
            </button>
            <button class="action-btn" id="sleepBtn" onclick="putToSleep()">
                <div class="action-emoji">üò¥</div>
                <div>–°–ø–∞—Ç—å</div>
            </button>
        </div>
        
        <div class="actions">
            <button class="action-btn" onclick="showGames()">
                <div class="action-emoji">üé≤</div>
                <div>–ò–≥—Ä—ã</div>
            </button>
            <button class="action-btn" onclick="showShop()">
                <div class="action-emoji">üõí</div>
                <div>–ú–∞–≥–∞–∑–∏–Ω</div>
            </button>
        </div>
    </div>
    
    <div class="sleep-overlay" id="sleepOverlay">
        <div class="sleep-message">
            <div class="sleep-emoji">üò¥</div>
            <div class="sleep-time" id="sleepTime">–°–ø–∏—Ç –µ—â–µ: 01:30</div>
            <div>–≠–Ω–µ—Ä–≥–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è...</div>
            <button class="wake-up-btn" onclick="wakeUp()">–†–∞–∑–±—É–¥–∏—Ç—å</button>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>

    <script>
        // Telegram WebApp API
        const tg = window.Telegram.WebApp;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        tg.ready();
        tg.expand();
        
        // –î–∞–Ω–Ω—ã–µ –ø–∏—Ç–æ–º—Ü–∞
        let petData = {
            name: '–ú–æ–π –ø–∏—Ç–æ–º–µ—Ü',
            type: 'cat',
            level: 1,
            exp: 0,
            coins: 100,
            hunger: 50,
            energy: 50,
            mood: 50,
            hygiene: 50,
            isSleeping: false,
            sleepUntil: null,
            lastAction: null,
            actionCooldown: 0,
            lifeDays: 0,
            lastFeedDay: null
        };
        
        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
        let telegramUser = null;
        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            telegramUser = tg.initDataUnsafe.user;
            console.log('Telegram user:', telegramUser);
        }
        
        // –¢–∏–ø—ã –ø–∏—Ç–æ–º—Ü–µ–≤ –∏ –∏—Ö —ç–º–æ–¥–∑–∏
        const petTypes = {
            'cat': 'üê±',
            'dog': 'üê∂',
            'rabbit': 'üê∞',
            'hamster': 'üêπ'
        };
        
        // –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–∏—Ç–æ–º—Ü–∞
        const petStates = {
            'happy': 'üòä',
            'normal': 'üòê',
            'sad': 'üò¢',
            'very_sad': 'üò≠',
            'sleeping': 'üò¥'
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–∏—Ç–æ–º—Ü–∞ –æ—Ç –±–æ—Ç–∞
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                const user = tg.initDataUnsafe.user;
                console.log('Telegram user:', user);
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            loadPetData();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateDisplay();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            startGameLoop();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ Telegram
            tg.MainButton.setText('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É');
            tg.MainButton.onClick(() => {
                savePetData();
                tg.close();
            });
            
            tg.BackButton.onClick(() => {
                savePetData();
                tg.close();
            });
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–∏—Ç–æ–º—Ü–∞
        function loadPetData() {
            const saved = localStorage.getItem('tamagotchi_pet');
            if (saved) {
                petData = { ...petData, ...JSON.parse(saved) };
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–∏—Ç–æ–º—Ü–∞
        function savePetData() {
            localStorage.setItem('tamagotchi_pet', JSON.stringify(petData));
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ –±–æ—Ç
            if (tg.sendData) {
                const dataToSend = {
                    action: 'update_pet_data',
                    petData: petData,
                    user: telegramUser
                };
                tg.sendData(JSON.stringify(dataToSend));
            }
        }
        
        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–æ—Ç–æ–º
        async function syncWithBot() {
            if (!telegramUser) return;
            
            try {
                // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API –±–æ—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–∏—Ç–æ–º—Ü–∞
                // const response = await fetch('/api/get_pet_data', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify({ userId: telegramUser.id })
                // });
                // const botPetData = await response.json();
                // if (botPetData) {
                //     petData = { ...petData, ...botPetData };
                //     updateDisplay();
                // }
            } catch (error) {
                console.log('–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –±–æ—Ç–æ–º:', error);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function updateDisplay() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è –∏ —Ç–∏–ø –ø–∏—Ç–æ–º—Ü–∞
            document.getElementById('petName').textContent = petData.name;
            document.getElementById('petDisplay').textContent = getPetEmoji();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –∏ –æ–ø—ã—Ç
            document.getElementById('level').textContent = petData.level;
            document.getElementById('exp').textContent = petData.exp;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–æ–∑—Ä–∞—Å—Ç
            const ageText = petData.lifeDays === 0 ? '–Ω–æ–≤–æ—Ä–æ–∂–¥–µ–Ω–Ω—ã–π' : `${petData.lifeDays} –¥–Ω–µ–π`;
            document.getElementById('age').textContent = ageText;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –º–æ–Ω–µ—Ç—ã
            document.getElementById('coins').textContent = petData.coins;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            updateStat('hunger', petData.hunger);
            updateStat('energy', petData.energy);
            updateStat('mood', petData.mood);
            updateStat('hygiene', petData.hygiene);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
            updateStatus();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–Ω
            if (petData.isSleeping) {
                showSleepOverlay();
            } else {
                hideSleepOverlay();
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            updateButtons();
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏ –ø–∏—Ç–æ–º—Ü–∞
        function getPetEmoji() {
            const baseEmoji = petTypes[petData.type] || 'üê±';
            const state = getPetState();
            return state === 'sleeping' ? baseEmoji + 'üò¥' : baseEmoji + petStates[state];
        }
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∏—Ç–æ–º—Ü–∞
        function getPetState() {
            if (petData.isSleeping) return 'sleeping';
            
            const avg = (petData.hunger + petData.energy + petData.mood + petData.hygiene) / 4;
            
            if (avg >= 80) return 'happy';
            if (avg >= 50) return 'normal';
            if (avg >= 20) return 'sad';
            return 'very_sad';
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStat(stat, value) {
            document.getElementById(stat + 'Value').textContent = value + '%';
            document.getElementById(stat + 'Bar').style.width = value + '%';
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
        function updateStatus() {
            const state = getPetState();
            const messages = {
                'happy': '–ü–∏—Ç–æ–º–µ—Ü –æ—á–µ–Ω—å —Å—á–∞—Å—Ç–ª–∏–≤! üåü',
                'normal': '–ü–∏—Ç–æ–º–µ—Ü —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è —Ö–æ—Ä–æ—à–æ! ‚≠ê',
                'sad': '–ü–∏—Ç–æ–º–µ—Ü –≥—Ä—É—Å—Ç–∏—Ç... üò¢',
                'very_sad': '–ü–∏—Ç–æ–º—Ü—É –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å! üò≠',
                'sleeping': '–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç... üò¥'
            };
            
            document.getElementById('statusMessage').textContent = messages[state] || '–ü–∏—Ç–æ–º–µ—Ü —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è —Ö–æ—Ä–æ—à–æ!';
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
        function updateButtons() {
            const buttons = ['feedBtn', 'playBtn', 'cleanBtn', 'sleepBtn'];
            buttons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (petData.actionCooldown > 0) {
                    btn.disabled = true;
                    btn.textContent = `‚è≥ ${petData.actionCooldown}—Å`;
                } else {
                    btn.disabled = false;
                    btn.innerHTML = getButtonHTML(btnId);
                }
            });
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ HTML –∫–Ω–æ–ø–∫–∏
        function getButtonHTML(btnId) {
            const buttons = {
                'feedBtn': '<div class="action-emoji">üçï</div><div>–ü–æ–∫–æ—Ä–º–∏—Ç—å</div>',
                'playBtn': '<div class="action-emoji">üéÆ</div><div>–ò–≥—Ä–∞—Ç—å</div>',
                'cleanBtn': '<div class="action-emoji">üõÅ</div><div>–ú—ã—Ç—å</div>',
                'sleepBtn': '<div class="action-emoji">üò¥</div><div>–°–ø–∞—Ç—å</div>'
            };
            return buttons[btnId] || '';
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π —Å–Ω–∞
        function showSleepOverlay() {
            document.getElementById('sleepOverlay').style.display = 'flex';
            updateSleepTime();
        }
        
        // –°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π —Å–Ω–∞
        function hideSleepOverlay() {
            document.getElementById('sleepOverlay').style.display = 'none';
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–Ω–∞
        function updateSleepTime() {
            if (!petData.isSleeping || !petData.sleepUntil) return;
            
            const now = new Date();
            const sleepEnd = new Date(petData.sleepUntil);
            const remaining = sleepEnd - now;
            
            if (remaining <= 0) {
                wakeUp();
                return;
            }
            
            const minutes = Math.floor(remaining / 60000);
            const seconds = Math.floor((remaining % 60000) / 1000);
            
            document.getElementById('sleepTime').textContent = 
                `–°–ø–∏—Ç –µ—â–µ: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Ç–æ–º—Ü–µ–º
        function feedPet() {
            if (petData.actionCooldown > 0) return;
            
            petData.hunger = Math.min(100, petData.hunger + 20);
            petData.mood = Math.min(100, petData.mood + 5);
            petData.coins = Math.max(0, petData.coins - 5);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–æ–∑—Ä–∞—Å—Ç –ø—Ä–∏ –∫–æ—Ä–º–ª–µ–Ω–∏–∏
            updateAge();
            
            startActionCooldown();
            showNotification('–ü–∏—Ç–æ–º–µ—Ü –ø–æ–∫–æ—Ä–º–ª–µ–Ω! üçï');
            updateDisplay();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞
        function updateAge() {
            const today = new Date().toDateString();
            if (petData.lastFeedDay !== today) {
                petData.lifeDays++;
                petData.lastFeedDay = today;
            }
        }
        
        function playWithPet() {
            if (petData.actionCooldown > 0) return;
            
            petData.mood = Math.min(100, petData.mood + 15);
            petData.energy = Math.max(0, petData.energy - 10);
            petData.hunger = Math.max(0, petData.hunger - 5);
            
            startActionCooldown();
            showNotification('–ü–∏—Ç–æ–º–µ—Ü –ø–æ–∏–≥—Ä–∞–ª! üéÆ');
            updateDisplay();
        }
        
        function cleanPet() {
            if (petData.actionCooldown > 0) return;
            
            petData.hygiene = Math.min(100, petData.hygiene + 25);
            petData.mood = Math.min(100, petData.mood + 10);
            petData.energy = Math.max(0, petData.energy - 5);
            
            startActionCooldown();
            showNotification('–ü–∏—Ç–æ–º–µ—Ü –ø–æ–º—ã—Ç! üõÅ');
            updateDisplay();
        }
        
        function putToSleep() {
            if (petData.actionCooldown > 0) return;
            
            petData.isSleeping = true;
            petData.sleepUntil = new Date(Date.now() + 90 * 60 * 1000); // 90 –º–∏–Ω—É—Ç
            
            startActionCooldown();
            showNotification('–ü–∏—Ç–æ–º–µ—Ü —É—Å–Ω—É–ª! üò¥');
            updateDisplay();
        }
        
        function wakeUp() {
            if (!petData.isSleeping) return;
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —ç–Ω–µ—Ä–≥–∏—é
            const sleepDuration = 90; // –º–∏–Ω—É—Ç
            const energyRestore = Math.min(100, petData.energy + 50);
            petData.energy = energyRestore;
            
            petData.isSleeping = false;
            petData.sleepUntil = null;
            
            showNotification('–ü–∏—Ç–æ–º–µ—Ü –ø—Ä–æ—Å–Ω—É–ª—Å—è! ‚ö°');
            updateDisplay();
        }
        
        // –ó–∞–ø—É—Å–∫ –∫—É–ª–¥–∞—É–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è
        function startActionCooldown() {
            petData.actionCooldown = 10; // 10 —Å–µ–∫—É–Ω–¥
        }
        
        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function startGameLoop() {
            setInterval(() => {
                // –£–º–µ–Ω—å—à–∞–µ–º –∫—É–ª–¥–∞—É–Ω
                if (petData.actionCooldown > 0) {
                    petData.actionCooldown--;
                }
                
                // –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                if (!petData.isSleeping) {
                    petData.hunger = Math.max(0, petData.hunger - 1);
                    petData.energy = Math.max(0, petData.energy - 1);
                    petData.mood = Math.max(0, petData.mood - 1);
                    petData.hygiene = Math.max(0, petData.hygiene - 1);
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                updateDisplay();
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
                if (Date.now() % 30000 < 1000) {
                    savePetData();
                }
            }, 1000);
        }
        
        // –ú–∏–Ω–∏-–∏–≥—Ä—ã
        function showGames() {
            showNotification('–ú–∏–Ω–∏-–∏–≥—Ä—ã —Å–∫–æ—Ä–æ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã! üé≤');
        }
        
        function showShop() {
            showNotification('–ú–∞–≥–∞–∑–∏–Ω —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω! üõí');
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        initGame();
    </script>
</body>
</html>
